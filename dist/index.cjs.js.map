{"version":3,"file":"index.cjs.js","sources":["../src/base64.js","../src/bindCustomEvent.js","../src/dispatch.js","../src/templater.js"],"sourcesContent":["/**\n * base64编码\n * @param  {string} str 需编码字符串\n * @return {string}\n */\nconst encodeBase64 = str => (\n  window.btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => (\n    String.fromCharCode(`0x${p1}`)\n  )))\n);\n\n/**\n * base64解码\n * @param  {string} str 需解码字符串，原字符串需utf-8编码\n * @return {string}\n */\nconst decodeBase64 = str => (\n  decodeURIComponent(Array.from(window.atob(str)).map(c => (\n    `%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`\n  )).join(''))\n);\n\nexport {\n  encodeBase64,\n  decodeBase64,\n};\n","/**\n * @module bindCustomEvent\n * @description 绑定自定义事件\n * @param {Object.<string, function>} obj - 自定义事件和处理函数映射表\n */\n\nexport default (obj) => {\n  const eventMap = new Map(Object.entries(obj));\n\n  eventMap.forEach((handler, event) => {\n    window.addEventListener(event, handler, false);\n  });\n};\n","/**\n * @module dispatch\n * @description 事件分发\n * @param {Object.<string, function>} handlers - 事件处理函数组成的对象\n * @return {function} 分发函数\n * @example  <caption>事件代理利用e.target.dataset.trigger查找handlers中匹配处理函数</caption>\n * <ul class=\"anchor-list\">\n *   <li><a href=\"#linkA\" data-trigger=\"link\" data-value=\"A\">Link A</a></li>\n *   <li><a href=\"#linkB\" data-trigger=\"link\" data-value=\"B\">Link B</a></li>\n *   <li><a href=\"#linkC\" data-trigger=\"link\" data-value=\"C\">Link C</a></li>\n * </ul>\n * @example\n * const createClickHandlers = () => {\n *   const link = (e) => {\n *     const { value } = e.target.dataset;\n *\n *     alert(value);\n *   };\n *\n *   return {\n *     link,\n *   };\n * });\n *\n * const clickHandlers = createClickHandlers();\n * document.body.addEventlistener('click', dispatch(clickHandlers), false);\n */\n\nexport default handlers => (e) => {\n  const { trigger } = e.target.dataset;\n\n  if (trigger && {}.hasOwnProperty.call(handlers, trigger)) {\n    handlers[trigger](e);\n  }\n};\n","/**\n * @module templater\n * @description 模版引擎\n * @example <caption>通过string查找</caption>\n * const template = templater`\n *   <p class=\"content\">${'content'}</p>\n * `;\n *\n * const context = { content: 'Hello World' };\n * const result = template(context);\n *\n * document.querySelector('#target').insertAdjacentHTML('beforeend', result);\n *\n * @example <caption>通过function查找，注意设置函数的displayName属性为data对应的key</caption>\n * const content = data => (\n *   Array.isArray(data) ?\n *     data.reduce((prev, d) => `${prev}<p>${d}</p>`, '') :\n *     `<p>${data}</p>`\n * );\n * content.displayName = 'content';\n *\n * const template = templater`\n *   <div class=\"content\">${content}</div>\n * `;\n *\n * const context = { content: ['A', 'B', 'C'] };\n * const result = template(context);\n *\n * document.querySelector('#target').insertAdjacentHTML('beforeend', result);\n */\n\nexport default (strs, ...keys) => (data) => {\n  const arr = Array.isArray(data) ? data.slice() : [Object.assign({}, data)];\n  const lastIndex = strs.length - 1;\n\n  const dataArr = arr.map(d => (\n    keys.map((key, i) => {\n      let replace = '';\n      if (typeof key === 'function') {\n        replace = key(d[key.displayName]);\n      } else if (typeof key === 'object') {\n        replace = key.content(d[key.name]);\n      } else {\n        replace = d[key];\n      }\n\n      return strs[i] + replace;\n    }).join('') + strs[lastIndex]\n  ));\n\n  return dataArr.join('');\n};\n"],"names":["encodeBase64","window","btoa","encodeURIComponent","str","replace","match","p1","String","fromCharCode","decodeBase64","decodeURIComponent","Array","from","atob","map","c","charCodeAt","toString","slice","join","obj","eventMap","Map","Object","entries","forEach","handler","event","addEventListener","e","trigger","target","dataset","hasOwnProperty","call","handlers","strs","keys","data","arr","isArray","assign","lastIndex","length","dataArr","key","i","d","displayName","babelHelpers.typeof","content","name"],"mappings":";;;;;;;;;;AAAA;;;;;AAKA,IAAMA,eAAe,SAAfA,YAAe;SACnBC,OAAOC,IAAP,CAAYC,mBAAmBC,GAAnB,EAAwBC,OAAxB,CAAgC,iBAAhC,EAAmD,UAACC,KAAD,EAAQC,EAAR;WAC7DC,OAAOC,YAAP,aAAyBF,EAAzB,EAD6D;GAAnD,CAAZ,CADmB;CAArB;;;;;;;;AAWA,IAAMG,eAAe,SAAfA,YAAe;SACnBC,mBAAmBC,MAAMC,IAAN,CAAWZ,OAAOa,IAAP,CAAYV,GAAZ,CAAX,EAA6BW,GAA7B,CAAiC;sBAC9C,YAAKC,EAAEC,UAAF,CAAa,CAAb,EAAgBC,QAAhB,CAAyB,EAAzB,CAAL,EAAoCC,KAApC,CAA0C,CAAC,CAA3C,CAD8C;GAAjC,EAEhBC,IAFgB,CAEX,EAFW,CAAnB,CADmB;CAArB;;AChBA;;;;;AAMA,uBAAe,UAACC,GAAD,EAAS;MAChBC,WAAW,IAAIC,GAAJ,CAAQC,OAAOC,OAAP,CAAeJ,GAAf,CAAR,CAAjB;WAESK,OAAT,CAAiB,UAACC,OAAD,EAAUC,KAAV,EAAoB;WAC5BC,gBAAP,CAAwBD,KAAxB,EAA+BD,OAA/B,EAAwC,KAAxC;GADF;CAHF;;ACNA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,gBAAe;SAAY,UAACG,CAAD,EAAO;QACxBC,OADwB,GACZD,EAAEE,MAAF,CAASC,OADG,CACxBF,OADwB;;QAG5BA,WAAW,GAAGG,cAAH,CAAkBC,IAAlB,CAAuBC,QAAvB,EAAiCL,OAAjC,CAAf,EAA0D;eAC/CA,OAAT,EAAkBD,CAAlB;;GAJW;CAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,iBAAe,UAACO,IAAD;oCAAUC,IAAV;QAAA;;;SAAmB,UAACC,IAAD,EAAU;QACpCC,MAAM5B,MAAM6B,OAAN,CAAcF,IAAd,IAAsBA,KAAKpB,KAAL,EAAtB,GAAqC,CAACK,OAAOkB,MAAP,CAAc,EAAd,EAAkBH,IAAlB,CAAD,CAAjD;QACMI,YAAYN,KAAKO,MAAL,GAAc,CAAhC;QAEMC,UAAUL,IAAIzB,GAAJ,CAAQ;aACtBuB,KAAKvB,GAAL,CAAS,UAAC+B,GAAD,EAAMC,CAAN,EAAY;YACf1C,UAAU,EAAd;;YACI,OAAOyC,GAAP,KAAe,UAAnB,EAA+B;oBACnBA,IAAIE,EAAEF,IAAIG,WAAN,CAAJ,CAAV;SADF,MAEO,IAAIC,QAAOJ,GAAP,MAAe,QAAnB,EAA6B;oBACxBA,IAAIK,OAAJ,CAAYH,EAAEF,IAAIM,IAAN,CAAZ,CAAV;SADK,MAEA;oBACKJ,EAAEF,GAAF,CAAV;;;eAGKT,KAAKU,CAAL,IAAU1C,OAAjB;OAVF,EAWGe,IAXH,CAWQ,EAXR,IAWciB,KAAKM,SAAL,CAZQ;KAAR,CAAhB;WAeOE,QAAQzB,IAAR,CAAa,EAAb,CAAP;GAnBa;CAAf;;;;;;;;"}